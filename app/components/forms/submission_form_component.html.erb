<%= form_with(model: @submission) do |form| %>
  <%= render Forms::BaseFormComponent.new(form: form, errors: @submission.errors) do %>
    <%= render Inputs::LabeledFieldComponent.new(form: form, key: :work_id, label: "Work") do %>
      <%= render Inputs::CollectionSelectFieldComponent.new(
        form: form,
        method: :work_id,
        collection: @current_user.works,
        value_method: :id,
        text_method: :short_description
      ) %>
    <% end %>
    <%= render Inputs::LabeledFieldComponent.new(form: form, key: :buyer_id, label: "Buyer") do %>
      <%= render Inputs::CollectionSelectFieldComponent.new(
        form: form,
        method: :buyer_id,
        collection: @current_user.buyers,
        value_method: :id,
        text_method: :short_description
      ) %>
    <% end %>
    <%= render Inputs::LabeledFieldComponent.new(form: form, key: :status, label: "Status") do %>
      <%= render Inputs::SelectFieldComponent.new(form: form, method: :status, choices: Submission.statuses.keys) %>
    <% end %>
    <%= render Forms::FilesSectionsComponent.new(form: form, files: @submission.files) %>
  <% end %>
<% end %>
