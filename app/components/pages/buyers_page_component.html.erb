<div class="p-8 space-y-8">
  <%= render(Pages::PageHeaderComponent.new) do "Buyers" end %>
  <%= render(DataTables::TableComponent.new(
    headers: [
      "Name",
      "Submissions",
      "Contracts"
    ],
    action_headers: [
      "Show",
      "Edit",
      "Destroy"
    ],
    rows: @buyers.map do |buyer|
      [
        buyer.name,
        if Submission.where(buyer_id: buyer.id).present?
          render(Misc::StyledLinkToComponent.new(name: "View (#{Submission.where(buyer_id: buyer.id).length})", options: submissions_path(:buyer_id => buyer.id)))
        else
          "None"
        end,
        if Contract.where(buyer_id: buyer.id).present?
          render(Misc::StyledLinkToComponent.new(name: "View (#{Contract.where(buyer_id: buyer.id).length})", options: contracts_path(:buyer_id => buyer.id)))
        else
          "None"
        end,
        render(Misc::StyledLinkToComponent.new(name: "Edit", options: edit_buyer_path(buyer))),
        render(Misc::StyledLinkToComponent.new(name: "Show", options: buyer_path(buyer))),
        render(Misc::StyledLinkToComponent.new(name: "Destroy", options: buyer_path(buyer), html_options: { method: :delete, data: { confirm: 'Are you certain you want to delete this?' } }))
      ]
    end
  )) %>
  <%= render(ButtonComponent.new(url: new_buyer_path)) do "New Buyer" end %>
</div>